---
import { Image } from 'astro:assets';
import { colorOptions } from '@/data/variants';

interface Props {
  id: string | number;
  slug: string;
  images: { src: any; alt: string }[];
  title: string;
  price: string;
  colors?: string[];
}

const { id, slug, images, title, price, colors } = Astro.props;
---
<a href={`/products/${slug}`}>
  <div class="bg-card rounded-lg p-4 hover:bg-card-hover transition-colors cursor-pointer h-full flex flex-col">
    <div class="aspect-square bg-muted rounded-lg mb-3 overflow-hidden" transition:name={`product-image-${id}`}>
      <Image 
        src={images[0].src} 
        alt={images[0].alt}
        widths={[200, 400, 800]}
        sizes="(max-width: 768px) 200px, 400px"
        format="webp"
        class="w-full h-full object-cover"
      />
    </div>
    
    <div class="flex-grow">
      <h3 class="text-sm font-medium text-card-foreground mb-1 line-clamp-2">
        {title}
      </h3>
      
      <p class="text-price font-medium text-sm mb-2">{price}</p>
    </div>
    
    {colors && (
      <div class="flex space-x-1 mt-auto">
        {colors.map((colorKey) => {
          const color = colorOptions[colorKey];
          if (!color) return null;
          return (
            <div 
              class="w-3 h-3 rounded-full border border-border"
              style={`background-color: ${color.hex}`}
              title={color.name}
            />
          );
        })}
      </div>
    )}
  </div>
</a>