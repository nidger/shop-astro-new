---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
import HeroSection from '../components/HeroSection.astro';
import ProductSection from '../components/ProductSection.astro';
import CollectionSection from '../components/CollectionSection.astro';
import { allProducts } from '../data/products.ts';

// Recreate the specific product lists from the single source of truth
const summerProducts = allProducts.slice(0, 4);
const featuredProducts = allProducts.slice(4);

// Recreate the collections list, finding the correct images from the main data
const collections = [
    {
      id: "summer",
      title: "SUMMER 2025",
      image: allProducts.find(p => p.id === '1').image
    },
    {
      id: "apparel",
      title: "APPAREL",
      image: allProducts.find(p => p.id === '5').image
    },
    {
      id: "stickers",
      title: "STICKERS",
      image: allProducts.find(p => p.id === '7').image
    }
  ];
---

<Layout>
  <HeroSection />
  <main>
    <ProductSection 
      id="summer-products"
      title="Get ready for summer!" 
      products={summerProducts}
      emoji="🏖️"
    />
    <ProductSection 
      title="Featured products" 
      products={featuredProducts}
    />
    <CollectionSection collections={collections} />
  </main>
  <Footer />
</Layout>