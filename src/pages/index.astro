---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
import HeroSection from '../components/HeroSection.astro';
import ProductSection from '../components/ProductSection.astro';
import CollectionSection from '../components/CollectionSection.astro';
import { allProducts } from '../data/products.ts';
import { Button } from '../components/ui/button';

// Recreate the specific product lists from the single source of truth
const summerProducts = allProducts.slice(0, 4);
const featuredProducts = allProducts.slice(4);

// Recreate the collections list, finding the correct images from the main data
const collections = [
    {
      id: "summer",
      title: "SUMMER 2025",
      image: allProducts.find(p => p.id === '1').image
    },
    {
      id: "apparel",
      title: "APPAREL",
      image: allProducts.find(p => p.id === '5').image
    },
    {
      id: "stickers",
      title: "STICKERS",
      image: allProducts.find(p => p.id === '7').image
    }
  ];
---

<Layout>
  <HeroSection />
  
  <main>
    <ProductSection 
      id="summer-products"
      title="Get ready for summer!" 
      products={summerProducts}
      emoji="ðŸ–ï¸"
    />
    <ProductSection 
      title="Featured products" 
      products={featuredProducts}
    />
    <CollectionSection collections={collections} />
    <!-- Contest Section -->
    <div class="px-6">
      <div class="bg-section-bg rounded-lg p-6 flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <div class="text-4xl">ðŸŽ¨</div>
          <div>
            <h3 class="text-lg font-bold text-foreground mb-1">
              The Spirit of Astro Design Contest
            </h3>
            <p class="text-sm text-muted-foreground">
              Enter for a chance to win a custom merchandise pack and support Astro's open source mission!
            </p>
          </div>
        </div>

        <Button variant="cta">
          Submit your designs
        </Button>
      </div>
    </div>
  </main>
</Layout>