---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
import HeroSection from '../components/HeroSection.astro';
import ProductSection from '../components/ProductSection.astro';
import CollectionSection from '../components/CollectionSection.astro';
import { allProducts } from '../data/products.ts';
import { Button } from '../components/ui/button';

// Recreate the specific product lists from the single source of truth
const summerProducts = allProducts.slice(0, 4);
const featuredProducts = allProducts.slice(4);

// Recreate the collections list, finding the correct images from the main data
const collections = [
    {
      id: "summer",
      title: "SUMMER 2025",
      image: allProducts.find(p => p.id === '1').images[0].src
    },
    {
      id: "apparel",
      title: "APPAREL",
      image: allProducts.find(p => p.id === '5').images[0].src
    },
    {
      id: "stickers",
      title: "STICKERS",
      image: allProducts.find(p => p.id === '7').images[0].src
    }
  ];
---

<Layout>
  <HeroSection />
  
  <main>
    <ProductSection 
      id="summer-products"
      title="Get ready for summer!" 
      products={summerProducts}
      emoji="🏖️"
    />
    <ProductSection 
      title="Featured products" 
      products={featuredProducts}
    />
    <CollectionSection collections={collections} />
    <!-- Contest Section -->
    <div id="contest-section" class="px-6">
      <div class="bg-section-bg rounded-lg p-6">
        <div class="flex items-start space-x-4">
          <div class="text-4xl shrink-0">🎨</div>
          <div class="flex-grow flex flex-col md:flex-row md:items-center justify-between gap-4">
            <div>
              <h3 class="text-lg font-bold text-foreground mb-1">
                The Spirit of Astro Design Contest
              </h3>
              <p class="text-sm text-muted-foreground">
                Enter for a chance to win a custom merchandise pack and support Astro's open source mission!
              </p>
            </div>
            <Button variant="cta" size="lg" class="shrink-0 mt-4 md:mt-0">
              Submit your designs
            </Button>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>